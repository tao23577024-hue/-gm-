<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>基金持仓监控看板 - 增强版</title>
    <style>
        /* --- 全局重置 --- */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            background-color: #06080a;
            color: #e0e0e0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            height: 100vh;
            overflow: hidden;
            display: flex; /* 使用Flex布局以支持拖拽调整 */
            flex-direction: column;
            padding: 15px;
        }

        /* --- 布局容器 --- */
        .dashboard-container {
            display: flex;
            flex: 1;
            width: 100%;
            height: 100%;
            gap: 0; /* 间隙由resize-handle处理 */
            overflow: hidden;
        }

        /* --- 左侧和中间的通用列样式 --- */
        .column-flex {
            flex: 1; /* 自动占据剩余空间 */
            display: flex;
            flex-direction: column;
            min-width: 300px; /* 最小宽度防止被压扁 */
            margin-right: 15px; /* 列间距 */
        }

        /* --- 右侧快讯列样式 (可变宽) --- */
        .column-fixed {
            width: 400px; /* 初始宽度 */
            min-width: 250px;
            max-width: 800px;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        /* --- 拖拽手柄 --- */
        .resize-handle {
            width: 10px;
            cursor: col-resize;
            background-color: transparent;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s;
            margin: 0 -5px; /* 负边距使其不占据额外视觉空间，但在鼠标判定上更宽 */
            z-index: 10;
        }

        .resize-handle:hover, .resize-handle.active {
            background-color: rgba(30, 128, 255, 0.3); /* 悬停时显示蓝色高亮 */
        }
        
        .resize-handle::after {
            content: '';
            width: 2px;
            height: 40px;
            background-color: #30363d;
            border-radius: 1px;
        }

        /* --- 卡片通用样式 --- */
        .card {
            background-color: #0b1016;
            border: 1px solid #1c2128;
            border-radius: 4px;
            display: flex;
            flex-direction: column;
            height: 100%; /* 占满列高 */
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }

        /* --- 标题栏 --- */
        .card-header {
            background-color: #0b1016;
            height: 45px;
            display: flex;
            align-items: center;
            padding: 0 15px;
            border-bottom: 1px solid #1c2128;
            position: relative;
            font-size: 14px;
            font-weight: 600;
            color: #5aa1ff;
            flex-shrink: 0; /* 防止标题被压缩 */
        }

        .card-header::before {
            content: '';
            position: absolute;
            left: 0;
            top: 12px;
            bottom: 12px;
            width: 3px;
            background-color: #1e80ff;
        }

        .header-title { flex-grow: 1; }
        .header-source { font-size: 12px; color: #8b949e; font-weight: normal; }

        /* --- 表格区域 --- */
        .table-container {
            flex: 1;
            overflow-y: auto;
            position: relative;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
            table-layout: fixed; /* 固定布局防止内容撑开 */
        }

        th {
            text-align: right;
            padding: 12px 15px;
            color: #8b949e;
            font-weight: normal;
            position: sticky;
            top: 0;
            background-color: #0b1016;
            border-bottom: 1px solid #252b36;
            z-index: 1;
        }

        td {
            padding: 12px 15px;
            border-bottom: 1px solid #161b22;
            color: #c9d1d9;
            text-align: right;
            white-space: nowrap; /* 不换行 */
            overflow: hidden;
            text-overflow: ellipsis;
        }

        tr:hover td { background-color: #161b22; }

        .col-left { text-align: left; }
        .col-center { text-align: center; }

        /* 股票代码样式 */
        .stock-code {
            color: #8b949e;
            font-family: 'SF Mono', Consolas, monospace;
            background: rgba(255,255,255,0.05);
            padding: 2px 4px;
            border-radius: 2px;
        }

        /* 涨跌颜色 */
        .color-up { color: #ff4d4f; }
        .color-down { color: #2cbe4e; }

        /* --- 右侧快讯iframe --- */
        .news-frame {
            width: 100%;
            height: 100%;
            border: none;
            background-color: #fff;
        }

        /* 滚动条美化 */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: #0b1016; }
        ::-webkit-scrollbar-thumb { background: #30363d; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #58a6ff; }

    </style>
</head>
<body>

    <div class="dashboard-container" id="dashboard">
        
        <div class="column-flex">
            <div class="card">
                <div class="card-header">
                    <span class="header-title">历史净值 (近10日)</span>
                </div>
                <div class="table-container">
                    <table id="historyTable">
                        <thead>
                            <tr>
                                <th class="col-left" width="30%">日期</th>
                                <th width="35%">净值</th>
                                <th width="35%">日涨幅</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="column-flex">
            <div class="card">
                <div class="card-header">
                    <span class="header-title">前十大重仓股</span>
                </div>
                <div class="table-container">
                    <table id="stockTable">
                        <thead>
                            <tr>
                                <th class="col-center" width="30%">代码</th>
                                <th class="col-center" width="40%">名称</th>
                                <th width="30%">占比</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="resize-handle" id="resizer"></div>

        <div class="column-fixed" id="rightPanel">
            <div class="card">
                <div class="card-header">
                    <span class="header-title">7x24小时快讯</span>
                    <span class="header-source">数据接入: 金十数据(源)</span>
                </div>
                <iframe src="https://wallstreetcn.com/live/global" class="news-frame" title="Live News"></iframe>
            </div>
        </div>

    </div>

<script>
    // --- 1. 数据定义 (严格保持截图数据) ---
    
    // 历史净值数据：确保负数绿，正数红
    const historyData = [
        { date: '2026/1/30', val: '2.5909', rate: -5.41 },
        { date: '2026/1/29', val: '2.7391', rate: 2.05 },
        { date: '2026/1/28', val: '2.6842', rate: 6.52 },
        { date: '2026/1/27', val: '2.5199', rate: 1.72 },
        { date: '2026/1/26', val: '2.4774', rate: 7.91 },
        { date: '2026/1/23', val: '2.2957', rate: 1.87 },
        { date: '2026/1/22', val: '2.2536', rate: -0.56 },
        { date: '2026/1/21', val: '2.2664', rate: 5.60 },
        { date: '2026/1/20', val: '2.1463', rate: 2.98 },
        { date: '2026/1/19', val: '2.0841', rate: 2.86 },
    ];

    // 股票数据：已去除成本价/加仓日期，仅保留代码、名称、占比
    const stockData = [
        { code: '600547', name: '山东黄金', percent: '2.91%' },
        { code: '600489', name: '中金黄金', percent: '3.59%' },
        { code: '600988', name: '赤峰黄金', percent: '3.59%' },
        { code: '002237', name: '恒邦股份', percent: '1.37%' },
        { code: '601899', name: '紫金矿业', percent: '4.31%' },
        { code: '601069', name: '西部黄金', percent: '2.07%' },
        { code: '000975', name: '银泰黄金', percent: '5.95%' },
        { code: '002155', name: '湖南黄金', percent: '1.39%' },
        { code: '000603', name: '盛达资源', percent: '1.63%' },
        { code: '000426', name: '兴业银锡', percent: '4.64%' },
    ];

    // --- 2. 渲染函数 ---

    function renderHistory() {
        const tbody = document.querySelector('#historyTable tbody');
        let html = '';
        historyData.forEach(item => {
            const isUp = item.rate > 0;
            const colorClass = isUp ? 'color-up' : 'color-down';
            const sign = isUp ? '+' : '';
            html += `
                <tr>
                    <td class="col-left">${item.date}</td>
                    <td>${item.val}</td>
                    <td class="${colorClass}">${sign}${item.rate}%</td>
                </tr>
            `;
        });
        tbody.innerHTML = html;
    }

    function renderStocks() {
        const tbody = document.querySelector('#stockTable tbody');
        let html = '';
        stockData.forEach(item => {
            html += `
                <tr>
                    <td class="col-center"><span class="stock-code">${item.code}</span></td>
                    <td class="col-center">${item.name}</td>
                    <td>${item.percent}</td>
                </tr>
            `;
        });
        tbody.innerHTML = html;
    }

    // --- 3. 拖拽逻辑 (实现快讯模块大小可调) ---
    
    function initResizer() {
        const resizer = document.getElementById('resizer');
        const rightPanel = document.getElementById('rightPanel');
        const dashboard = document.getElementById('dashboard');
        
        let isResizing = false;

        resizer.addEventListener('mousedown', (e) => {
            isResizing = true;
            resizer.classList.add('active');
            document.body.style.cursor = 'col-resize';
            // 防止选中文字
            e.preventDefault();
        });

        document.addEventListener('mousemove', (e) => {
            if (!isResizing) return;
            
            // 计算新宽度：容器右侧坐标 - 鼠标当前X坐标
            const containerRect = dashboard.getBoundingClientRect();
            const newWidth = containerRect.right - e.clientX;
            
            // 限制最大最小宽度
            if (newWidth > 200 && newWidth < 800) {
                rightPanel.style.width = newWidth + 'px';
            }
        });

        document.addEventListener('mouseup', () => {
            if (isResizing) {
                isResizing = false;
                resizer.classList.remove('active');
                document.body.style.cursor = 'default';
            }
        });
    }

    // --- 4. 初始化 ---
    renderHistory();
    renderStocks();
    initResizer();

</script>
</body>
</html>
